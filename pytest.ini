[pytest]
# Configuração do Pytest para Shift Left Testing
# Compatível com Python 3.8 - 3.12
# Integração com Zephyr Scale (Jira)

# Versão mínima do pytest
minversion = 7.0

# Diretórios de teste
testpaths = tests

# Padrão de arquivos de teste
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Opções de execução
addopts = 
    -v
    --strict-markers
    --tb=short
    --cov=src/cnpj_validator
    --cov-report=html
    --cov-report=term-missing
    --cov-report=xml
    --html=reports/test_report.html
    --self-contained-html

# Markers personalizados para Zephyr
markers =
    zephyr: Marca testes para integração com Zephyr Scale (ID do caso de teste)
    integration: Testes de integração
    unit: Testes unitários
    smoke: Testes de smoke (validação básica)
    regression: Testes de regressão
    performance: Testes de performance
    security: Testes de segurança
    slow: Testes que demoram mais tempo
    critical: Testes críticos que não podem falhar
    wip: Work in Progress - testes em desenvolvimento
    api: Testes que dependem da API da Receita Federal

# Cobertura de código
[coverage:run]
source = cnpj_validator
omit = 
    */tests/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */env/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = reports/coverage
