# 5. Casos de Teste Realistas - Valida√ß√£o de CNPJ

## Documento 5: Cen√°rios de Teste Pr√°ticos e Massa de Dados

---

## 1. INTRODU√á√ÉO

Este documento fornece uma colet√¢nea completa de **casos de teste realistas** para valida√ß√£o de CNPJ, organizados por categoria e complexidade. √â uma ferramenta essencial para QA que precisam:

- Planejar testes de valida√ß√£o de CNPJ
- Criar massa de dados para automa√ß√£o
- Validar implementa√ß√µes de c√≥digo
- Documentar cen√°rios de edge cases
- Treinar equipes em valida√ß√£o de documentos

**P√∫blico-Alvo**: QA J√∫nior a S√™nior, Desenvolvedores, Analistas de Neg√≥cio

---

## 2. ORGANIZA√á√ÉO DOS CASOS DE TESTE

### 2.1 Estrutura de Cada Caso

Cada caso de teste cont√©m:
- **ID do Teste**: Identificador √∫nico
- **Categoria**: Tipo de valida√ß√£o
- **Cen√°rio**: Descri√ß√£o do que est√° sendo testado
- **Entrada**: CNPJ fornecido para teste
- **Resultado Esperado**: V√°lido ou Inv√°lido
- **Motivo**: Explica√ß√£o t√©cnica do resultado
- **Prioridade**: Alta, M√©dia, Baixa
- **Tags**: Para filtros e busca

### 2.2 Categorias de Teste

```
üìÅ Casos de Teste
‚îú‚îÄ‚îÄ üü¢ Formato V√°lido (Happy Path)
‚îú‚îÄ‚îÄ üî¥ Formato Inv√°lido (Valida√ß√£o de Estrutura)
‚îú‚îÄ‚îÄ üü° D√≠gitos Verificadores
‚îú‚îÄ‚îÄ üü† CNPJs Especiais e Edge Cases
‚îú‚îÄ‚îÄ üîµ Formato Alfanum√©rico (Futuro)
‚îú‚îÄ‚îÄ üü£ Integra√ß√£o com API da Receita
‚îî‚îÄ‚îÄ ‚ö´ Testes de Performance e Carga
```

---

## 3. CASOS DE TESTE - FORMATO V√ÅLIDO (Happy Path)

### CT-001: CNPJ V√°lido - Formato Padr√£o
**Categoria**: Formato V√°lido  
**Prioridade**: Alta  
**Tags**: `happy-path`, `numerico`, `validacao-basica`

**Cen√°rio**: Validar CNPJ com estrutura correta e DVs v√°lidos

**Entrada**: `11.222.333/0001-81`

**Resultado Esperado**: ‚úÖ **V√ÅLIDO**

**Motivo**: 
- Raiz: 11.222.333 (formato correto)
- Ordem: 0001 (matriz)
- DVs: 81 (calculados corretamente)

**Evid√™ncias de C√°lculo**:
```
Primeiro DV: 8
Segundo DV: 1
CNPJ: 11.222.333/0001-81 ‚úì
```

---

### CT-002: CNPJ V√°lido - Filial
**Categoria**: Formato V√°lido  
**Prioridade**: Alta  
**Tags**: `happy-path`, `filial`, `numerico`

**Cen√°rio**: Validar CNPJ de filial (ordem > 0001)

**Entrada**: `12.345.678/0002-95`

**Resultado Esperado**: ‚úÖ **V√ÅLIDO**

**Motivo**:
- Mesma raiz da matriz (12.345.678)
- Ordem: 0002 (primeira filial)
- DVs recalculados para esta ordem espec√≠fica

---

### CT-003: CNPJ V√°lido - Sem Formata√ß√£o
**Categoria**: Formato V√°lido  
**Prioridade**: Alta  
**Tags**: `happy-path`, `sem-formatacao`, `numerico`

**Cen√°rio**: Validar CNPJ fornecido sem pontos, barras e h√≠fen

**Entrada**: `11222333000181`

**Resultado Esperado**: ‚úÖ **V√ÅLIDO**

**Motivo**:
- CNPJ deve ser validado mesmo sem formata√ß√£o
- Corresponde ao CNPJ 11.222.333/0001-81

**Observa√ß√£o**: Sistema deve aceitar ambos formatos (com e sem m√°scara)

---

### CT-004: CNPJ V√°lido - M√∫ltiplas Filiais
**Categoria**: Formato V√°lido  
**Prioridade**: M√©dia  
**Tags**: `happy-path`, `filiais-multiplas`, `numerico`

**Cen√°rio**: Validar CNPJs de uma empresa com v√°rias filiais

**Entradas**:
- Matriz: `98.765.432/0001-79`
- Filial 1: `98.765.432/0002-59`
- Filial 2: `98.765.432/0003-39`
- Filial 100: `98.765.432/0100-09`

**Resultado Esperado**: ‚úÖ Todos **V√ÅLIDOS**

**Motivo**:
- Raiz id√™ntica (98.765.432)
- Ordens sequenciais com DVs recalculados
- At√© 9999 filiais poss√≠veis por raiz

---

### CT-005: CNPJ V√°lido - Grandes Empresas Reais
**Categoria**: Formato V√°lido  
**Prioridade**: M√©dia  
**Tags**: `happy-path`, `empresas-reais`, `numerico`

**Cen√°rio**: Validar CNPJs de grandes empresas brasileiras (dados p√∫blicos)

**Entradas** (exemplos fict√≠cios, estrutura similar √† realidade):
- Banco do Brasil: `00.000.000/0001-91`
- Petrobras: `33.000.167/0001-01`
- Vale: `33.592.510/0001-54`

**Resultado Esperado**: ‚úÖ **V√ÅLIDOS**

**Observa√ß√£o**: Use CNPJs reais dispon√≠veis em sites oficiais para testes mais realistas

---

## 4. CASOS DE TESTE - FORMATO INV√ÅLIDO (Valida√ß√£o de Estrutura)

### CT-006: CNPJ com Menos de 14 Caracteres
**Categoria**: Formato Inv√°lido  
**Prioridade**: Alta  
**Tags**: `error`, `estrutura`, `tamanho-invalido`

**Cen√°rio**: Rejeitar CNPJ com quantidade insuficiente de d√≠gitos

**Entradas**:
- `11.222.333/0001-8` (13 d√≠gitos)
- `1122233300018` (13 d√≠gitos sem formata√ß√£o)
- `11.222.333/001-81` (12 d√≠gitos)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**: CNPJ deve ter exatamente 14 caracteres num√©ricos

**Mensagem Sugerida**: "CNPJ incompleto. S√£o necess√°rios 14 d√≠gitos."

---

### CT-007: CNPJ com Mais de 14 Caracteres
**Categoria**: Formato Inv√°lido  
**Prioridade**: Alta  
**Tags**: `error`, `estrutura`, `tamanho-invalido`

**Cen√°rio**: Rejeitar CNPJ com d√≠gitos extras

**Entradas**:
- `11.222.333/0001-811` (15 d√≠gitos)
- `112223330001811` (15 d√≠gitos sem formata√ß√£o)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**: CNPJ excede os 14 caracteres permitidos

**Mensagem Sugerida**: "CNPJ inv√°lido. Deve conter exatamente 14 d√≠gitos."

---

### CT-008: CNPJ com Caracteres N√£o Num√©ricos
**Categoria**: Formato Inv√°lido  
**Prioridade**: Alta  
**Tags**: `error`, `estrutura`, `caracteres-invalidos`

**Cen√°rio**: Rejeitar CNPJ contendo letras ou s√≠mbolos (formato num√©rico)

**Entradas**:
- `AB.222.333/0001-81` (letras)
- `11.222.333/000A-81` (letra no meio)
- `11.222.333/0001-8#` (s√≠mbolo especial)
- `11.222.333/0001-8 ` (espa√ßo no final)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**: CNPJ num√©rico aceita apenas d√≠gitos 0-9 (at√© julho/2026)

**Mensagem Sugerida**: "CNPJ cont√©m caracteres inv√°lidos. Use apenas n√∫meros."

---

### CT-009: CNPJ com Formata√ß√£o Incorreta
**Categoria**: Formato Inv√°lido  
**Prioridade**: M√©dia  
**Tags**: `error`, `estrutura`, `formatacao-incorreta`

**Cen√°rio**: Rejeitar ou normalizar CNPJs com formata√ß√£o errada

**Entradas**:
- `11222333/0001-81` (faltam pontos)
- `11.222.333-0001/81` (separadores trocados)
- `11-222-333/0001-81` (h√≠fens no lugar de pontos)

**Resultado Esperado**: 
- **Op√ß√£o 1**: ‚ùå **INV√ÅLIDO** (valida√ß√£o r√≠gida)
- **Op√ß√£o 2**: ‚úÖ **V√ÅLIDO** ap√≥s normaliza√ß√£o (remover formata√ß√£o)

**Recomenda√ß√£o**: Implementar normaliza√ß√£o autom√°tica antes da valida√ß√£o

---

### CT-010: CNPJ Vazio ou Nulo
**Categoria**: Formato Inv√°lido  
**Prioridade**: Alta  
**Tags**: `error`, `estrutura`, `campo-vazio`

**Cen√°rio**: Rejeitar entradas vazias, nulas ou apenas espa√ßos

**Entradas**:
- `""` (string vazia)
- `null`
- `undefined`
- `   ` (apenas espa√ßos)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Mensagem Sugerida**: "CNPJ n√£o pode estar vazio."

---

## 5. CASOS DE TESTE - D√çGITOS VERIFICADORES

### CT-011: CNPJ com Primeiro DV Incorreto
**Categoria**: D√≠gitos Verificadores  
**Prioridade**: Alta  
**Tags**: `error`, `dv`, `primeiro-dv-invalido`

**Cen√°rio**: Rejeitar CNPJ onde apenas o primeiro DV est√° errado

**Entrada**: `11.222.333/0001-91` (correto seria -81)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**:
- Primeiro DV correto: 8
- Primeiro DV fornecido: 9
- Segundo DV correto: 1

**Mensagem Sugerida**: "D√≠gito verificador inv√°lido."

---

### CT-012: CNPJ com Segundo DV Incorreto
**Categoria**: D√≠gitos Verificadores  
**Prioridade**: Alta  
**Tags**: `error`, `dv`, `segundo-dv-invalido`

**Cen√°rio**: Rejeitar CNPJ onde apenas o segundo DV est√° errado

**Entrada**: `11.222.333/0001-82` (correto seria -81)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**:
- Primeiro DV correto: 8
- Segundo DV correto: 1
- Segundo DV fornecido: 2

**Mensagem Sugerida**: "D√≠gito verificador inv√°lido."

---

### CT-013: CNPJ com Ambos DVs Incorretos
**Categoria**: D√≠gitos Verificadores  
**Prioridade**: Alta  
**Tags**: `error`, `dv`, `ambos-dvs-invalidos`

**Cen√°rio**: Rejeitar CNPJ onde ambos os DVs est√£o errados

**Entrada**: `11.222.333/0001-00` (correto seria -81)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**:
- DVs corretos: 81
- DVs fornecidos: 00

**Mensagem Sugerida**: "D√≠gitos verificadores inv√°lidos."

---

### CT-014: CNPJ com DV Resultante de Resto 0
**Categoria**: D√≠gitos Verificadores  
**Prioridade**: M√©dia  
**Tags**: `edge-case`, `dv`, `resto-zero`

**Cen√°rio**: Validar CNPJ cujo c√°lculo resulta em resto 0 ou 1

**Entrada**: `00.000.000/0001-91` (primeiro DV com resto 0)

**Resultado Esperado**: ‚úÖ **V√ÅLIDO**

**Motivo**:
- Quando resto da divis√£o = 0 ou 1, DV = 0
- Regra especial do algoritmo M√≥dulo 11

**Observa√ß√£o**: Teste essencial para garantir que a regra est√° implementada

---

### CT-015: CNPJ com Transposi√ß√£o de D√≠gitos
**Categoria**: D√≠gitos Verificadores  
**Prioridade**: M√©dia  
**Tags**: `error`, `dv`, `transposicao`

**Cen√°rio**: Detectar erro de digita√ß√£o (troca de posi√ß√£o de d√≠gitos)

**Entrada**: `11.222.333/0010-81` (correto: /0001-)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**:
- Ordem alterada de 0001 para 0010
- DVs n√£o correspondem √† nova ordem
- Algoritmo deve detectar inconsist√™ncia

---

## 6. CASOS DE TESTE - CNPJs ESPECIAIS E EDGE CASES

### CT-016: CNPJ com Todos D√≠gitos Iguais
**Categoria**: Edge Cases  
**Prioridade**: Alta  
**Tags**: `edge-case`, `digitos-repetidos`, `cnpj-invalido`

**Cen√°rio**: Rejeitar CNPJs com todos os d√≠gitos id√™nticos

**Entradas**:
- `00.000.000/0000-00`
- `11.111.111/1111-11`
- `22.222.222/2222-22`
- `99.999.999/9999-99`

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**:
- CNPJs com d√≠gitos repetidos n√£o s√£o emitidos pela Receita
- S√£o considerados inv√°lidos por padr√£o
- Mesmo que o c√°lculo de DV seja matematicamente correto

**Observa√ß√£o**: Valida√ß√£o adicional al√©m do algoritmo de DV

---

### CT-017: CNPJ com Sequ√™ncia Num√©rica
**Categoria**: Edge Cases  
**Prioridade**: M√©dia  
**Tags**: `edge-case`, `sequencia`, `validacao-adicional`

**Cen√°rio**: Detectar padr√µes suspeitos (sequ√™ncias crescentes/decrescentes)

**Entradas**:
- `12.345.678/9012-XX` (sequ√™ncia crescente)
- `98.765.432/1098-XX` (sequ√™ncia decrescente)

**Resultado Esperado**: 
- **Op√ß√£o 1**: ‚ùå **INV√ÅLIDO** (regra de neg√≥cio)
- **Op√ß√£o 2**: ‚úÖ **V√ÅLIDO** se DVs corretos (apenas valida√ß√£o matem√°tica)

**Recomenda√ß√£o**: Implementar como regra de neg√≥cio adicional (flag de alerta)

---

### CT-018: CNPJ de Matriz (Ordem 0001)
**Categoria**: Edge Cases  
**Prioridade**: M√©dia  
**Tags**: `edge-case`, `matriz`, `ordem-especial`

**Cen√°rio**: Validar que ordem 0001 sempre indica matriz

**Entrada**: `11.222.333/0001-81`

**Resultado Esperado**: ‚úÖ **V√ÅLIDO** + Flag "√â Matriz"

**Observa√ß√£o**: √ötil para l√≥gica de neg√≥cio que diferencia matriz de filial

---

### CT-019: CNPJ com Ordem 9999 (√öltima Filial)
**Categoria**: Edge Cases  
**Prioridade**: Baixa  
**Tags**: `edge-case`, `ultima-filial`, `ordem-maxima`

**Cen√°rio**: Validar o limite m√°ximo de filiais (9999)

**Entrada**: `11.222.333/9999-XX` (calcular DVs)

**Resultado Esperado**: ‚úÖ **V√ÅLIDO** (se DVs corretos)

**Motivo**: Sistema deve suportar at√© 9999 filiais por raiz

---

### CT-020: CNPJ com Raiz 00.000.000
**Categoria**: Edge Cases  
**Prioridade**: M√©dia  
**Tags**: `edge-case`, `raiz-zero`, `caso-especial`

**Cen√°rio**: Validar CNPJ com raiz composta por zeros

**Entrada**: `00.000.000/0001-91`

**Resultado Esperado**: 
- **Matematicamente**: ‚úÖ **V√ÅLIDO** (se DVs corretos)
- **Receita Federal**: ‚ùå **INV√ÅLIDO** (n√£o emitidos)

**Recomenda√ß√£o**: Implementar valida√ß√£o de neg√≥cio adicional

---

## 7. CASOS DE TESTE - FORMATO ALFANUM√âRICO (Futuro - 2026+)

### CT-021: CNPJ Alfanum√©rico V√°lido - Padr√£o
**Categoria**: Formato Alfanum√©rico  
**Prioridade**: Alta  
**Tags**: `alfanumerico`, `futuro`, `happy-path`

**Cen√°rio**: Validar CNPJ no novo formato com letras e n√∫meros

**Entrada**: `12.ABC.345/01DE-35`

**Resultado Esperado**: ‚úÖ **V√ÅLIDO** (ap√≥s jul/2026)

**Motivo**:
- Raiz: 12.ABC.345 (alfanum√©rico)
- Ordem: 01DE (alfanum√©rico)
- DVs: 35 (calculados com convers√£o ASCII)

**C√°lculo com ASCII**:
```
Caractere:  1  2  A  B  C  3  4  5  0  1  D  E
Valor:      1  2  17 18 19 3  4  5  0  1  20 21
Primeiro DV: 3
Segundo DV: 5
CNPJ: 12.ABC.345/01DE-35 ‚úì
```

---

### CT-022: CNPJ Alfanum√©rico com Letras Min√∫sculas
**Categoria**: Formato Alfanum√©rico  
**Prioridade**: M√©dia  
**Tags**: `alfanumerico`, `normalizacao`, `case-sensitivity`

**Cen√°rio**: Validar tratamento de letras min√∫sculas

**Entrada**: `12.abc.345/01de-35` (min√∫sculas)

**Resultado Esperado**: 
- **Op√ß√£o 1**: ‚úÖ **V√ÅLIDO** ap√≥s normalizar para mai√∫sculas
- **Op√ß√£o 2**: ‚ùå **INV√ÅLIDO** (exigir mai√∫sculas)

**Recomenda√ß√£o**: Implementar convers√£o autom√°tica para UPPERCASE antes da valida√ß√£o

---

### CT-023: CNPJ Alfanum√©rico com Caracteres Especiais
**Categoria**: Formato Alfanum√©rico  
**Prioridade**: Alta  
**Tags**: `alfanumerico`, `error`, `caracteres-invalidos`

**Cen√°rio**: Rejeitar CNPJs alfanum√©ricos com caracteres n√£o permitidos

**Entradas**:
- `12.A@C.345/01DE-35` (@ n√£o permitido)
- `12.√ÅBC.345/01DE-35` (acentua√ß√£o n√£o permitida)
- `12.A C.345/01DE-35` (espa√ßo n√£o permitido)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**: Apenas A-Z e 0-9 s√£o permitidos na raiz e ordem

**Mensagem Sugerida**: "CNPJ alfanum√©rico cont√©m caracteres inv√°lidos. Use apenas A-Z e 0-9."

---

### CT-024: CNPJ Alfanum√©rico com DVs Alfanum√©ricos
**Categoria**: Formato Alfanum√©rico  
**Prioridade**: Alta  
**Tags**: `alfanumerico`, `error`, `dv-incorreto`

**Cen√°rio**: Rejeitar CNPJs onde os DVs cont√™m letras

**Entrada**: `12.ABC.345/01DE-AB` (DVs com letras)

**Resultado Esperado**: ‚ùå **INV√ÅLIDO**

**Motivo**: Segundo a IN 2.229/2024, os DVs permanecem **num√©ricos** mesmo no formato alfanum√©rico

**Mensagem Sugerida**: "D√≠gitos verificadores devem ser num√©ricos (0-9)."

---

### CT-025: Coexist√™ncia de Formatos (Num√©rico + Alfanum√©rico)
**Categoria**: Formato Alfanum√©rico  
**Prioridade**: Alta  
**Tags**: `alfanumerico`, `coexistencia`, `transicao`

**Cen√°rio**: Validar que ambos os formatos s√£o aceitos simultaneamente

**Entradas**:
- `11.222.333/0001-81` (num√©rico - empresa antiga)
- `12.ABC.345/01DE-35` (alfanum√©rico - empresa nova)

**Resultado Esperado**: ‚úÖ Ambos **V√ÅLIDOS**

**Motivo**: Per√≠odo de transi√ß√£o (2026-2028+) exige suporte a ambos formatos

**Observa√ß√£o**: Sistema deve detectar automaticamente o formato e aplicar valida√ß√£o apropriada

---

## 8. CASOS DE TESTE - INTEGRA√á√ÉO COM API DA RECEITA

### CT-026: Consulta de CNPJ V√°lido e Ativo
**Categoria**: Integra√ß√£o API  
**Prioridade**: Alta  
**Tags**: `api`, `receita-federal`, `happy-path`

**Cen√°rio**: Consultar CNPJ v√°lido na base da Receita Federal

**Entrada**: CNPJ v√°lido de empresa ativa

**Resultado Esperado**: 
- ‚úÖ CNPJ existe na base
- Status: ATIVA
- Retorna: Raz√£o social, endere√ßo, CNAE, data de abertura

**Observa√ß√£o**: Requer integra√ß√£o com API oficial ou web scraping (com captcha)

---

### CT-027: Consulta de CNPJ V√°lido mas Inativo
**Categoria**: Integra√ß√£o API  
**Prioridade**: Alta  
**Tags**: `api`, `receita-federal`, `empresa-inativa`

**Cen√°rio**: Consultar CNPJ de empresa baixada/suspensa

**Entrada**: CNPJ v√°lido de empresa inativa

**Resultado Esperado**:
- ‚úÖ CNPJ existe na base
- Status: BAIXADA / SUSPENSA / INAPTA
- Retorna: Data de encerramento, motivo

**Observa√ß√£o**: Importante para regras de neg√≥cio que exigem empresa ativa

---

### CT-028: Consulta de CNPJ Inexistente
**Categoria**: Integra√ß√£o API  
**Prioridade**: M√©dia  
**Tags**: `api`, `receita-federal`, `cnpj-inexistente`

**Cen√°rio**: Consultar CNPJ com DVs v√°lidos mas n√£o cadastrado

**Entrada**: CNPJ matematicamente v√°lido mas n√£o emitido

**Resultado Esperado**:
- ‚ö†Ô∏è CNPJ n√£o encontrado na base da Receita
- Status: INEXISTENTE

**Motivo**: D√≠gitos verificadores corretos n√£o garantem exist√™ncia real

**Mensagem Sugerida**: "CNPJ v√°lido matematicamente, mas n√£o cadastrado na Receita Federal."

---

### CT-029: Timeout na Consulta √† API
**Categoria**: Integra√ß√£o API  
**Prioridade**: M√©dia  
**Tags**: `api`, `timeout`, `erro-rede`

**Cen√°rio**: Tratar falhas de conex√£o ou timeout

**Entrada**: Qualquer CNPJ v√°lido

**Resultado Esperado**:
- ‚ö†Ô∏è Erro de timeout
- Mensagem amig√°vel ao usu√°rio
- Retry autom√°tico (opcional)

**Mensagem Sugerida**: "N√£o foi poss√≠vel consultar a Receita Federal. Tente novamente."

---

### CT-030: Rate Limiting da API
**Categoria**: Integra√ß√£o API  
**Prioridade**: Alta  
**Tags**: `api`, `rate-limit`, `throttling`

**Cen√°rio**: Tratar limite de requisi√ß√µes por minuto

**Entrada**: M√∫ltiplas consultas sequenciais r√°pidas

**Resultado Esperado**:
- ‚ö†Ô∏è HTTP 429 (Too Many Requests)
- Implementar backoff exponencial
- Queue de requisi√ß√µes

**Recomenda√ß√£o**: Respeitar limites da API para evitar bloqueio

---

## 9. CASOS DE TESTE - PERFORMANCE E CARGA

### CT-031: Valida√ß√£o de 1.000 CNPJs Sequenciais
**Categoria**: Performance  
**Prioridade**: M√©dia  
**Tags**: `performance`, `carga`, `batch`

**Cen√°rio**: Validar lote de CNPJs em tempo aceit√°vel

**Entrada**: Lista com 1.000 CNPJs diversos

**Resultado Esperado**:
- Tempo total: < 5 segundos
- Tempo m√©dio por CNPJ: < 5ms
- Sem perda de precis√£o

**M√©trica**: Throughput > 200 CNPJs/segundo

---

### CT-032: Valida√ß√£o Concorrente (100 Threads)
**Categoria**: Performance  
**Prioridade**: Alta  
**Tags**: `performance`, `concorrencia`, `stress`

**Cen√°rio**: Validar comportamento sob carga concorrente

**Entrada**: 100 threads validando CNPJs simultaneamente

**Resultado Esperado**:
- Sistema permanece responsivo
- Sem race conditions
- Sem memory leaks
- CPU < 80%

---

### CT-033: Valida√ß√£o com Entrada Extremamente Grande
**Categoria**: Performance  
**Prioridade**: Baixa  
**Tags**: `performance`, `edge-case`, `entrada-grande`

**Cen√°rio**: Testar comportamento com string muito grande

**Entrada**: String com 10.000 caracteres (simulando ataque)

**Resultado Esperado**:
- ‚ùå INV√ÅLIDO detectado rapidamente (< 10ms)
- Sem crash ou travamento
- Mem√≥ria n√£o dispara

**Recomenda√ß√£o**: Validar tamanho antes de processar

---

## 10. MATRIZ DE PRIORIZA√á√ÉO

### 10.1 Testes Obrigat√≥rios (P0 - Alta Prioridade)

| ID | Caso de Teste | Categoria | Motivo |
|----|---------------|-----------|--------|
| CT-001 | CNPJ v√°lido padr√£o | Happy Path | Caso mais comum |
| CT-006 | Menos de 14 d√≠gitos | Estrutura | Erro frequente de usu√°rios |
| CT-008 | Caracteres n√£o num√©ricos | Estrutura | Erro de digita√ß√£o comum |
| CT-010 | Campo vazio/nulo | Estrutura | Valida√ß√£o b√°sica obrigat√≥ria |
| CT-011 | Primeiro DV incorreto | D√≠gitos Verificadores | Essencial para algoritmo |
| CT-013 | Ambos DVs incorretos | D√≠gitos Verificadores | Valida√ß√£o completa |
| CT-016 | D√≠gitos todos iguais | Edge Cases | Regra de neg√≥cio cr√≠tica |
| CT-021 | CNPJ alfanum√©rico v√°lido | Alfanum√©rico | Prepara√ß√£o para 2026 |
| CT-024 | DVs alfanum√©ricos (erro) | Alfanum√©rico | Regra espec√≠fica da IN |

---

### 10.2 Testes Importantes (P1 - M√©dia Prioridade)

| ID | Caso de Teste | Categoria | Motivo |
|----|---------------|-----------|--------|
| CT-002 | CNPJ de filial | Happy Path | Cen√°rio comum em empresas |
| CT-004 | M√∫ltiplas filiais | Happy Path | Valida√ß√£o de neg√≥cio |
| CT-009 | Formata√ß√£o incorreta | Estrutura | Melhora UX com normaliza√ß√£o |
| CT-014 | DV com resto 0 | D√≠gitos Verificadores | Edge case do algoritmo |
| CT-017 | Sequ√™ncia num√©rica | Edge Cases | Detec√ß√£o de fraude |
| CT-022 | Letras min√∫sculas (alfa) | Alfanum√©rico | Toler√¢ncia de entrada |
| CT-027 | CNPJ inativo | Integra√ß√£o API | Regra de neg√≥cio comum |

---

### 10.3 Testes Opcionais (P2 - Baixa Prioridade)

| ID | Caso de Teste | Categoria | Motivo |
|----|---------------|-----------|--------|
| CT-019 | Ordem 9999 | Edge Cases | Cen√°rio muito raro |
| CT-020 | Raiz 00.000.000 | Edge Cases | Quase nunca ocorre |
| CT-033 | Entrada extremamente grande | Performance | Prote√ß√£o contra ataques |

---

## 11. MASSA DE DADOS PARA TESTES

### 11.1 CNPJs Num√©ricos V√°lidos (Para Automa√ß√£o)

```
11.222.333/0001-81
12.345.678/0001-95
98.765.432/0001-79
11.111.111/0001-18
99.999.999/9999-04
00.000.000/0001-91
34.028.316/0001-03
60.746.948/0001-12
11.222.333/0002-62
12.345.678/0002-76
```

---

### 11.2 CNPJs Inv√°lidos (Para Testes Negativos)

```
11.222.333/0001-00  (DVs incorretos)
11.111.111/1111-11  (Todos d√≠gitos iguais)
12.345.678/0001-99  (Primeiro DV errado)
98.765.432/0001-70  (Segundo DV errado)
1234567800019      (Apenas 13 d√≠gitos)
AB.222.333/0001-81  (Cont√©m letras - formato num√©rico)
12.345.678/0001-8   (Faltam d√≠gitos)
12.345.678/0001-811 (D√≠gitos extras)
```

---

### 11.3 CNPJs Alfanum√©ricos V√°lidos (2026+)

```
12.ABC.345/01DE-35
A1.B2C.3D4/E5F6-72
99.ZZZ.999/ABCD-18
00.AAA.000/0001-05
1A.2B3.C4D/5E6F-49
```

---

### 11.4 CNPJs Alfanum√©ricos Inv√°lidos (2026+)

```
12.@BC.345/01DE-35  (Caractere especial @)
12.√ÅBC.345/01DE-35  (Acentua√ß√£o)
12.ABC.345/01DE-AB  (DVs alfanum√©ricos - erro)
12.abc.345/01de-35  (Min√∫sculas - depende da implementa√ß√£o)
1A.2B3.C4D/5E6F-00  (DVs incorretos)
```

---

## 12. ESTRAT√âGIA DE COBERTURA DE TESTES

### 12.1 Pir√¢mide de Testes para Valida√ß√£o de CNPJ

```
              /\
             /  \
            / E2E\    5% - Testes de Interface (CT-026 a CT-030)
           /______\
          /        \
         /Integration\ 15% - Testes de API (CT-026 a CT-030)
        /____________\
       /              \
      /  Unit Tests    \  80% - Testes Unit√°rios (CT-001 a CT-025)
     /__________________\
```

**Distribui√ß√£o Recomendada**:
- **80% Testes Unit√°rios**: Valida√ß√£o de algoritmo, DVs, formatos
- **15% Testes de Integra√ß√£o**: API da Receita, banco de dados
- **5% Testes E2E**: Interface web, fluxos completos

---

### 12.2 Cobertura por Categoria

| Categoria | Casos de Teste | % Cobertura M√≠nima |
|-----------|----------------|--------------------|
| Happy Path | CT-001 a CT-005 | 100% |
| Estrutura Inv√°lida | CT-006 a CT-010 | 100% |
| D√≠gitos Verificadores | CT-011 a CT-015 | 100% |
| Edge Cases | CT-016 a CT-020 | 80% |
| Alfanum√©rico | CT-021 a CT-025 | 100% (ap√≥s jul/2026) |
| Integra√ß√£o API | CT-026 a CT-030 | 70% |
| Performance | CT-031 a CT-033 | 50% |

---

## 13. EXEMPLO DE PLANO DE TESTE COMPLETO

### 13.1 Objetivo
Validar implementa√ß√£o de algoritmo de valida√ß√£o de CNPJ (num√©rico e alfanum√©rico)

### 13.2 Escopo
- ‚úÖ Valida√ß√£o de estrutura (14 caracteres)
- ‚úÖ C√°lculo de d√≠gitos verificadores (M√≥dulo 11)
- ‚úÖ Convers√£o ASCII (formato alfanum√©rico)
- ‚úÖ Normaliza√ß√£o de entrada (remover formata√ß√£o)
- ‚úÖ Valida√ß√£o de caracteres permitidos
- ‚úÖ Detec√ß√£o de CNPJs inv√°lidos (todos d√≠gitos iguais)

### 13.3 Fora de Escopo
- ‚ùå Consulta real √† Receita Federal (mock)
- ‚ùå Valida√ß√£o de status da empresa (ativa/inativa)
- ‚ùå Armazenamento de dados (LGPD)

### 13.4 Ambiente de Teste
- **Sistema Operacional**: Windows 11, Ubuntu 22.04, macOS 13+
- **Linguagem**: TypeScript 5.x
- **Framework de Testes**: Jest 29.x
- **Cobertura M√≠nima**: 95%

### 13.5 Crit√©rios de Aceite
- ‚úÖ Todos os casos de teste P0 (alta prioridade) passando
- ‚úÖ 90%+ dos casos P1 (m√©dia prioridade) passando
- ‚úÖ Cobertura de c√≥digo > 95%
- ‚úÖ Performance: valida√ß√£o < 5ms por CNPJ
- ‚úÖ Sem falsos positivos ou negativos

### 13.6 Riscos
- ‚ö†Ô∏è API da Receita pode estar indispon√≠vel (mitigar com mock)
- ‚ö†Ô∏è Formato alfanum√©rico ainda n√£o est√° ativo (testar com dados fict√≠cios)
- ‚ö†Ô∏è Captcha pode bloquear consultas automatizadas

---

## 14. AUTOMA√á√ÉO DE CASOS DE TESTE

### 14.1 Exemplo em TypeScript (Jest)

```typescript
// cnpj.validator.spec.ts
describe('Valida√ß√£o de CNPJ', () => {
  
  // CT-001: CNPJ v√°lido padr√£o
  test('CT-001: Deve validar CNPJ num√©rico v√°lido', () => {
    const cnpj = '11.222.333/0001-81';
    const resultado = validarCNPJ(cnpj);
    expect(resultado.valido).toBe(true);
  });
  
  // CT-006: Menos de 14 d√≠gitos
  test('CT-006: Deve rejeitar CNPJ com menos de 14 d√≠gitos', () => {
    const cnpj = '11.222.333/0001-8';
    const resultado = validarCNPJ(cnpj);
    expect(resultado.valido).toBe(false);
    expect(resultado.erro).toContain('incompleto');
  });
  
  // CT-011: Primeiro DV incorreto
  test('CT-011: Deve rejeitar CNPJ com primeiro DV incorreto', () => {
    const cnpj = '11.222.333/0001-91';
    const resultado = validarCNPJ(cnpj);
    expect(resultado.valido).toBe(false);
    expect(resultado.erro).toContain('verificador');
  });
  
  // CT-016: Todos d√≠gitos iguais
  test('CT-016: Deve rejeitar CNPJ com todos d√≠gitos iguais', () => {
    const cnpjs = [
      '00.000.000/0000-00',
      '11.111.111/1111-11',
      '99.999.999/9999-99'
    ];
    
    cnpjs.forEach(cnpj => {
      const resultado = validarCNPJ(cnpj);
      expect(resultado.valido).toBe(false);
      expect(resultado.erro).toContain('d√≠gitos repetidos');
    });
  });
  
  // CT-021: CNPJ alfanum√©rico v√°lido
  test('CT-021: Deve validar CNPJ alfanum√©rico v√°lido', () => {
    const cnpj = '12.ABC.345/01DE-35';
    const resultado = validarCNPJ(cnpj, { formato: 'alfanumerico' });
    expect(resultado.valido).toBe(true);
  });
  
});
```

---

### 14.2 Exemplo em Robot Framework (BDD)

```robot
*** Settings ***
Library    CNPJValidator

*** Test Cases ***
CT-001 Validar CNPJ Num√©rico V√°lido
    ${cnpj}=    Set Variable    11.222.333/0001-81
    ${resultado}=    Validar CNPJ    ${cnpj}
    Should Be True    ${resultado['valido']}

CT-006 Rejeitar CNPJ com Menos de 14 D√≠gitos
    ${cnpj}=    Set Variable    11.222.333/0001-8
    ${resultado}=    Validar CNPJ    ${cnpj}
    Should Be False    ${resultado['valido']}
    Should Contain    ${resultado['erro']}    incompleto

CT-016 Rejeitar Todos D√≠gitos Iguais
    @{cnpjs}=    Create List
    ...    00.000.000/0000-00
    ...    11.111.111/1111-11
    ...    99.999.999/9999-99
    
    FOR    ${cnpj}    IN    @{cnpjs}
        ${resultado}=    Validar CNPJ    ${cnpj}
        Should Be False    ${resultado['valido']}
    END
```

---

## 15. CHECKLIST DE VALIDA√á√ÉO

### Para QA: Use Este Checklist ao Testar

#### Valida√ß√£o B√°sica
- [ ] CNPJ tem exatamente 14 caracteres (sem formata√ß√£o)?
- [ ] Todos os caracteres s√£o v√°lidos (0-9 para num√©rico, A-Z e 0-9 para alfanum√©rico)?
- [ ] D√≠gitos verificadores s√£o num√©ricos?
- [ ] Sistema aceita entrada sem formata√ß√£o (pontos, barra, h√≠fen)?

#### Valida√ß√£o de D√≠gitos Verificadores
- [ ] Primeiro DV est√° correto?
- [ ] Segundo DV est√° correto?
- [ ] Regra de resto 0 ou 1 est√° implementada?
- [ ] Convers√£o ASCII funciona corretamente (formato alfanum√©rico)?

#### Valida√ß√µes de Neg√≥cio
- [ ] CNPJs com todos d√≠gitos iguais s√£o rejeitados?
- [ ] Sistema diferencia matriz (0001) de filiais?
- [ ] Sistema suporta ambos formatos (num√©rico e alfanum√©rico)?

#### Valida√ß√µes de UX
- [ ] Mensagens de erro s√£o claras e espec√≠ficas?
- [ ] Feedback visual (‚úì v√°lido / ‚úó inv√°lido) est√° vis√≠vel?
- [ ] M√°scara de entrada funciona corretamente?
- [ ] Campo n√£o aceita mais de 14 caracteres (sem formata√ß√£o)?

#### Performance
- [ ] Valida√ß√£o de 1 CNPJ leva < 10ms?
- [ ] Valida√ß√£o de 1000 CNPJs leva < 10s?
- [ ] Sistema n√£o trava com entrada muito grande?

---

## 16. REFER√äNCIAS E RECURSOS

### Documenta√ß√£o Oficial
- [Receita Federal - Consulta CNPJ](https://servicos.receita.fazenda.gov.br/Servicos/cnpjreva/cnpjreva_solicitacao.asp)
- [Instru√ß√£o Normativa RFB n¬∫ 2.229/2024](https://www.gov.br/receitafederal/pt-br/assuntos/orientacao-tributaria/cadastros/cnpj)
- [IN RFB n¬∫ 2.119/2022](https://www.gov.br/receitafederal/pt-br)

### Ferramentas √öteis
- [Gerador de CNPJ V√°lido](https://www.4devs.com.br/gerador_de_cnpj) (para massa de testes)
- [Calculadora de DV Online](https://www.geradorcnpj.com/algoritmo_do_cnpj.htm)
- [Tabela ASCII Completa](https://www.asciitable.com/)

### Frameworks de Teste
- **Jest**: Framework de testes unit√°rios JavaScript/TypeScript
- **Cypress**: Testes E2E para aplica√ß√µes web
- **Robot Framework**: Automa√ß√£o de testes BDD
- **k6**: Testes de carga e performance

---

## 17. CONCLUS√ÉO

Este documento fornece uma base s√≥lida de **casos de teste realistas** para valida√ß√£o de CNPJ. Use-o como:

‚úÖ **Refer√™ncia** ao criar planos de teste  
‚úÖ **Checklist** durante execu√ß√£o de testes  
‚úÖ **Base** para automa√ß√£o de testes  
‚úÖ **Guia** para massa de dados de teste  
‚úÖ **Material de treinamento** para novos QAs  

**Lembre-se**: Testes abrangentes garantem qualidade, mas o entendimento profundo do algoritmo √© essencial para criar casos de teste eficazes.

---

**Desenvolvido para a comunidade QA**  
*√öltima atualiza√ß√£o: Dezembro 2025*
